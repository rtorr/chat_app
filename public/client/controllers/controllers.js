// Generated by CoffeeScript 1.4.0
(function() {

  chat_app.controller('PostsController', function($scope, chat_services) {
    var init, socket_the_data;
    init = function() {
      return socket.emit('init', 'init-data');
    };
    $scope.insert_post = function() {
      var new_post;
      new_post = $scope.newPost;
      socket_the_data(new_post);
      new_post.post_text = "";
    };
    socket_the_data = function(data) {
      return socket.emit('new_post', data);
    };
    socket.on('news', function() {
      var $post_container, post_container_scroll_eight;
      $post_container = $('#posts');
      $scope.$apply(function() {
        return $scope.posts = chat_services.get_chat_posts();
      });
      post_container_scroll_eight = document.getElementById('posts').scrollHeight;
      $post_container.animate({
        scrollTop: post_container_scroll_eight
      });
    });
    return init();
  });

}).call(this);
